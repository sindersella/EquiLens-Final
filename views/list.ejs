<!doctype html>
<html>
  <head>
    <title><%=shopName%></title>
    <link rel="stylesheet"  type="text/css" href="/main.css" />
  </head>
  <body>
    <header class="header">
      <div class="header_content">
        <a class="logo" href="/user">EQUILENS</a>
        <nav>
              <ul class="sidebar">
                <li onclick=hideSidebar()><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="30" viewBox="0 -960 960 960" width="30"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a></li>
                <li><a href="/user">Home</a></li>
                <li><a href="list">All Rankings</a></li>
                <li><a href="listusers">All Platforms</a></li>
                <li><a href="about">About</a></li>
                <li><a href="logout">Log out</a></li>
                <li><a href="contact-user"><button>Get in Touch</button></a></li>
              </ul>
            </nav>
            <nav>
                <ul>
                  <form action="/search-result" method="GET">
                    <div class="search_bar">
                      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z" fill="rgba(22, 108, 221, 0.807)"/></svg>
                    <input class="search_input" id="search-box" type="text" name="keyword" placeholder="Search">
                    </div>
                  </form>
                  <li class="hideLinks"><a href="/user">Home</a></li>
                  <li class="hideLinks"><a href="list">All Rankings</a></li>
                  <li class="hideLinks"><a href="listusers">All Platforms</a></li>
                  <li class="hideLinks"><a href="about">About</a></li>
                  <li class="hideLinks"><a href="logout">Log out</a></li>
                  <li class="hideLinks"><a href="contact-user"><button>Get in Touch</button></a></li>
                  <li class="hamburger" onclick=showSidebar()><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="30" viewBox="0 -960 960 960" width="30"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></a></li>
                </ul>
              </nav>
          </div>
        </header>

        <main class="main">
          <h1><%=shopName%>: Rankings</h1>
          <div>
            <div>
              <table>
                <tr>
                  <th> Platfrom Name </th><th> Issues </th><th> Ranking </th>
                </tr>
                <% platformRating.forEach(function(rankings){ %>
                  <tr>
                    <td><%= rankings.platform %></td> 
                    <td><%= rankings.issue %></td>
                    <td>
                      <div class="ratings-wrapper">
                        <div class="star-ratings">
                          <span class="star" data-rating="<%= rankings.ranking %>"></span>
                          <span class="rating-text">(<%= rankings.ranking %>/5)</span>
                        </div>
                      </div>
                    </td>
                  </tr>  
                  <% }) %>
              </table>
            </div>
          </div>
          
          <div class="ratings-wrapper">
            <div class="star-ratings">
              <span data-rating="5">&#9733;</span>
              <span data-rating="4">&#9733;</span>
              <span data-rating="3">&#9733;</span>
              <span data-rating="2">&#9733;</span>
              <span data-rating="1">&#9733;</span>
            </div>
          </div>

          <button><a href="/user">Home page</a></button>
        </main>
        
  <footer>
    <p class="copyright"> Â© Copyright 2024. All rights reserved by Sundus Abdi.</p>
  </footer>
  
  <!-- here is the script for the star ratings -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
      const stars = document.querySelectorAll(".star");

      stars.forEach(star => {
        const rating = parseInt(star.getAttribute("data-rating"));

        for (let i = 1; i <= 5; i++) {
          if (i <= rating) {
            star.innerHTML += "&#9733;";
          } else {
            star.innerHTML += "&#9734;";
          }
        }
      });
    });
  </script>

  

              
  <script>
    function showSidebar(){
      const sidebar = document.querySelector('.sidebar')
      sidebar.style.display = 'flex'
    }
    function hideSidebar(){
      const sidebar = document.querySelector('.sidebar')
      sidebar.style.display = 'none'
    }
  </script>
</body>
</html>
